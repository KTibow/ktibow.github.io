<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Redacted+Script:wght@400&display=swap"
    />
    <link rel="stylesheet" href="/base.css" />
    <meta name="accent-color" content="#324AD5" />
    <title>Rant: Why aren't you using ESM</title>
  </head>
  <body class="bg-neutral-900 text-white">
    <div class="bg">
      <img src="./bg.avif" class="bg" />
    </div>
    <main class="prose prose-invert mx-auto my-4">
      <h1>Rant: Why aren't you using ESM</h1>
      <p>
        I'll start this post by saying that I know there are alternatives, like
        Deno. They're great, and I use Deno for one project since it's more
        convenient to than not. However, I'm really used to Node, and switching
        is hard (no <code>package.json</code> to publish with, some packages
        like Vite don't work, and I have to pass allow flags to run code).
      </p>
      <p>
        The thing is that a lot of people and tools default to non-ESM syntax
        and it's really annoying.
      </p>
      <p>
        Every time I create a new project, I have to set
        <code>{ "type": "module" }</code> in <code>package.json</code>.
        Sometimes I have to then reload my IDE for it to give ESM-style
        recommendations.
      </p>
      <p>
        If I'm compiling my code with <code>esbuild</code> (awesome tool), I
        have to also explicitly tell it to use ESM syntax.
      </p>
      <p>
        Okay. I set up everything to use ESM. Am I done? No. A lot of LLMs and
        other help resources use <code>require</code> in their code and I have
        to manually fix it.
      </p>
      <p>
        Plus, there are some places where I can't even use ESM, like (IIRC) Khan
        Academy, any old codebase, or many other places that have stupid
        configurations.
      </p>
      <br />
      <p>
        Everything that isn't ESM is really old and has no reason to exist in
        this day and age. If I could, I would purge it from all of the past and
        present world.
      </p>
      <p>
        <em
          >Also see: ranting about
          <a href="/blog/hafrontend/"
            >how the Home Assistant frontend uses Gulp and 100 NPM packages</a
          ></em
        >
      </p>
    </main>
    <style>
      .bg {
        position: absolute;
        top: 0;
        width: 100%;
        height: 32rem;
        z-index: -1;
      }
      .bg img {
        position: absolute;
        inset: 0;
        object-fit: cover;
        object-position: top;
      }
      .bg::after {
        position: absolute;
        content: "";
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgb(23 23 23 / 0.6) 0%,
          rgb(23 23 23 / 0.612) 10%,
          rgb(23 23 23 / 0.636) 20%,
          rgb(23 23 23 / 0.704) 40%,
          rgb(23 23 23 / 0.792) 60%,
          rgb(23 23 23 / 0.892) 80%,
          rgb(23 23 23 / 0.944) 90%,
          rgb(23 23 23 / 1) 100%
        );
      }
    </style>
  </body>
</html>
