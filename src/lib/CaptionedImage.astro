---
import type { HTMLAttributes } from 'astro/types';
import CaptionedMedia from './CaptionedMedia.astro';

type Props = {
  alt: string;
  view?: 'light' | 'makedark' | 'dark';
} & HTMLAttributes<'img'>;

const { alt, view = 'light', ...extra } = Astro.props;
---

<CaptionedMedia {alt} dark={view != 'light'}>
  <img {...extra} {alt} class:list={[{ invert: view == 'makedark' }]} />
</CaptionedMedia>

<style>
  img {
    display: block;
    width: 100%;
    margin: 0 !important;
  }
  .invert {
    filter: invert(1) hue-rotate(180deg);
  }
</style>
